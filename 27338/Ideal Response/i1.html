<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Maintenance Tracker</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <style>
        body { font-family: 'Roboto', sans-serif; background: #f4f4f4; }
        .container { max-width: 800px; margin: 40px auto; padding: 40px; background: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .main-title { text-align: center; color: #333; }
        .input-field, .button { width: 100%; padding: 10px; margin: 10px 0; }
        .timeline { padding: 20px; }
        .timeline-item { background: #fff; border: 1px solid #ddd; padding: 10px; margin-bottom: 10px; position: relative; }
        .timeline-item::before { content: ''; position: absolute; top: 50%; left: -15px; width: 15px; height: 15px; background: #007BFF; border-radius: 50%; }
        .chart-container { width: 100% }
        .reminder { color: #ff9900; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
    </style>
</head>
<body>
<div class="container">
    <h1 class="main-title">Vehicle Maintenance Tracker</h1>
    <form id="maintenanceForm">
        <input class="input-field" type="date" id="date" placeholder="Date">
        <input class="input-field" type="number" id="mileage" placeholder="Mileage">
        <select class="input-field" id="type">
            <option value="oil-change">Oil Change</option>
            <option value="tire-rotation">Tire Rotation</option>
            <!-- Add more options -->
        </select>
        <textarea class="input-field" id="notes" placeholder="Notes"></textarea>
        <button class="button" type="submit">Add Maintenance Record</button>
    </form>
    <div class="timeline" id="maintenanceTimeline"></div>
    <div class="chart-container">
        <canvas id="maintenanceChart"></canvas>
    </div>
    <div class="reminder" id="upcomingReminder"></div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
<script>
    $(document).ready(function() {
        const maintenances = [];
        const timeline = $('#maintenanceTimeline');
        const reminder = $('#upcomingReminder');
        const form = $('#maintenanceForm');
        const chartCtx = document.getElementById('maintenanceChart').getContext('2d');
        let chart;

        form.on('submit', function(e) {
            e.preventDefault();
            const newItem = {
                date: $('#date').val(),
                mileage: $('#mileage').val(),
                type: $('#type').val(),
                notes: $('#notes').val()
            };
            if (!newItem.date || !newItem.mileage || !newItem.type) {
                alert('Please fill in all fields.');
                return;
            }
            // Simulate data saving
            timeline.prepend(createTimelineItem(newItem));
            maintenances.push(newItem);
            updateChart();
            form.trigger('reset');
        });

        function createTimelineItem(item) {
            return `<div class="timeline-item">
                        <h4>${item.date} - ${item.type}</h4>
                        <p>Mileage: ${item.mileage}</p>
                        <p>Notes: ${item.notes}</p>
                    </div>`;
        }

        function updateChart() {
            // Check if the chart instance already exists
            if (chart) {
                chart.destroy(); // Destroy the existing chart instance
            }

            const mileages = maintenances.map(item => item.mileage);
            const dates = maintenances.map(item => item.date);
            chart = new Chart(chartCtx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [{
                        label: 'Mileage',
                        data: mileages,
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        }

        function checkReminders() {
            // Simulated reminder check
            reminder.html('Next oil change due in 30 days.');
        }

        updateChart();
        checkReminders();
    });
</script>
</body>
</html>